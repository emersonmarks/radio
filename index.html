<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R√°dios do Brasil - Responsivo</title>
<style>
	*{ box-sizing: border-box; }

    body {
        font-family: Arial, sans-serif;
        background: #121212;
        color: #fff;
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    h1 { margin: 20px 0 10px 0; }

    /* Player fixo */
    #playerContainer {
        position: sticky;
        top: 0;
        background: #1e1e1e;
        width: 100%;
        max-width: 500px;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: center;
        box-shadow: 0 0 10px #000;
        z-index: 5;
    }
	
	#radioEscolhida{		
		display: flex;
		align-items: center;
	}
	
    #currentLogo {
        width: 60px;
        height: 60px;
        object-fit: contain;
        border-radius: 8px;
        background: #fff;
        margin-bottom: 8px;
    }
    #currentStation { margin: 0px 0px 8px 10px; }
    
	audio {
        width: 100%;
        margin-top: 5px;
    }

    /* Filtros */
    #filters {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin: 0px 20px 20px 20px;
        justify-content: center;
    }
    input, select, button {
        padding: 8px;
        border: none;
        border-radius: 4px;
        background: #1e1e1e;
        color: #fff;
    }
    input { width: 220px; }
    button {
        background: #ff6f61;
        cursor: pointer;
    }
    button:hover { background: #ff3b2f; }

    /* √Åreas de an√∫ncios 
    .ad-top, .ad-bottom {
        width: calc( 100% - 320px );
        max-width: 1200px;
        height: 90px;
        background: #333;
        color: #ccc;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 15px 0;
        text-align: center;
    }
    .ad-side {
        width: 120px;
        background: #333;
        color: #ccc;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0 10px;
        flex-shrink: 0;
        height: fit-content;
        align-self: flex-start;
        position: sticky;
        top: 120px;
        text-align: center;
    }  */

		.teste-banner {
		position: relative;
		padding-top: 18%;
		overflow: hidden;
		max-width: 100%;
		height: auto;
		/*margin-top: 0;
		margin-bottom: 0;*/
		}

		.teste-banner iframe,  
		.teste-banner object,  
		.teste-banner embed,
		.teste-banner img{
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;

		}

	
    /* Layout principal */
    .main-container {
        display: flex;
        width: 100%;
        max-width: 1400px;
        justify-content: center;
    }
    .content {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0 20px;
    }

    /* Listagem de r√°dios */
    #stations {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
        width: 100%;
    }
    .station {
        background: #1e1e1e;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        transition: 0.3s;
        cursor: pointer;
        position: relative;
    }
    .station:hover { background: #333; }
    .station img {
        width: 80px;
        height: 80px;
        object-fit: contain;
        border-radius: 8px;
        background: #fff;
        margin-bottom: 10px;
    }

    /* √çcone de favorito */
    .fav-icon {
        position: absolute;
        top: 8px;
        right: 8px;
        font-size: 26px;
        cursor: pointer;
        user-select: none;
        transition: 0.3s;
    }
    .fav-icon.favorited {
        color: #ff0;
        text-shadow: 0 0 5px #000;
    }
    .fav-icon:not(.favorited) {
        color: #777;
    }

    /* ===== Responsivo ===== */
    @media (max-width: 1000px) {
		.ad-top, .ad-bottom {
        width: calc( 100% - 40px );}
	
        .ad-side { display: none; }
        #stations { grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
    }

    @media (max-width: 540px) {
        #filters {
            flex-direction: column;
            align-items: stretch;
        }
        #filters input, #filters select, #filters button {
            width: 100%;
        }

        .ad-top, .ad-bottom {
            height: 70px;
            font-size: 0.9em;
        }
        #playerContainer {
            max-width: 95%;
        }
    }
	
</style>

	
</head>
<body>

<h1>üéµ R√°dios do Brasil</h1>

<!-- Player fixo -->
<div id="playerContainer" style="display: none;">
  <div id="radioEscolhida">
    <img id="currentLogo" src="" alt="Logo">
    <h3 id="currentStation"></h3>
  </div>
    <audio id="radioPlayer" controls autoplay></audio>
</div>

<!-- Filtros -->
<div id="filters">
    <input type="text" id="searchInput" placeholder="Buscar por nome...">
<select id="stateSelect">
  <option value="">Todos os estados</option>
  <option value="Acre">Acre</option>
  <option value="Alagoas">Alagoas</option>
  <option value="Amap√°">Amap√°</option>
  <option value="Amazonas">Amazonas</option>
  <option value="Bahia">Bahia</option>
  <option value="Cear√°">Cear√°</option>
  <option value="Distrito Federal">Distrito Federal</option>
  <option value="Esp√≠rito Santo">Esp√≠rito Santo</option>
  <option value="Goi√°s">Goi√°s</option>
  <option value="Maranh√£o">Maranh√£o</option>
  <option value="Mato Grosso">Mato Grosso</option>
  <option value="Mato Grosso do Sul">Mato Grosso do Sul</option>
  <option value="Minas Gerais">Minas Gerais</option>
  <option value="Par√°">Par√°</option>
  <option value="Para√≠ba">Para√≠ba</option>
  <option value="Paran√°">Paran√°</option>
  <option value="Pernambuco">Pernambuco</option>
  <option value="Piau√≠">Piau√≠</option>
  <option value="Rio de Janeiro">Rio de Janeiro</option>
  <option value="Rio Grande do Norte">Rio Grande do Norte</option>
  <option value="Rio Grande do Sul">Rio Grande do Sul</option>
  <option value="Rond√¥nia">Rond√¥nia</option>
  <option value="Roraima">Roraima</option>
  <option value="Santa Catarina">Santa Catarina</option>
  <option value="S√£o Paulo">S√£o Paulo</option>
  <option value="Sergipe">Sergipe</option>
  <option value="Tocantins">Tocantins</option>
</select>


<select id="categorySelect">
  <option value="">Todas as categorias</option>
  <option value="adult contemporary">Adult Contemporary</option>
  <option value="alternative">Alternative</option>
  <option value="ambient">Ambient</option>
  <option value="blues">Blues</option>
  <option value="bossa nova">Bossa Nova</option>
  <option value="classical">Cl√°ssica</option>
  <option value="country">Country</option>
  <option value="dance">Dance</option>
  <option value="electronic">Eletr√¥nica</option>
  <option value="forr√≥">Forr√≥</option>
  <option value="funk">Funk</option>
  <option value="gospel">Gospel</option>
  <option value="hip hop">Hip Hop</option>
  <option value="house">House</option>
  <option value="indie">Indie</option>
  <option value="jazz">Jazz</option>
  <option value="latin">Latin</option>
  <option value="mpb">MPB</option>
  <option value="news">Not√≠cias</option>
  <option value="oldies">Oldies</option>
  <option value="pop">Pop</option>
  <option value="progressive">Progressive</option>
  <option value="reggae">Reggae</option>
  <option value="religious">Religiosa</option>
  <option value="rock">Rock</option>
  <option value="salsa">Salsa</option>
  <option value="sertanejo">Sertanejo</option>
  <option value="soul">Soul</option>
  <option value="talk">Talk / Entrevistas</option>
  <option value="techno">Techno</option>
  <option value="trance">Trance</option>
  <option value="variety">Variedades</option>
</select>

	<button onclick="applyFilters()">Buscar</button>
	<button onclick="showFavorites()">‚≠ê Favoritos</button>
</div>

<div class="teste-banner">

<script>
  atOptions = {
    'key' : '6b119b3b6aa653dcbe1e30654f66fc11',
    'format' : 'iframe',
    'height' : 60,
    'width' : 468,
    'params' : {}
  };
</script>
<script src="https://www.highperformanceformat.com/6b119b3b6aa653dcbe1e30654f66fc11/invoke.js"></script>

</div>


<div class="main-container">
    <div class="ad-side">[ Lateral Esquerda ]</div>
    <div class="content">
        <div id="stations"></div>
    </div>
    <div class="ad-side">[ Lateral Direita ]</div>
</div>

<div class="ad-bottom">[ Espa√ßo para an√∫ncio - Rodap√© 1200x90 ]</div>

<script>
const API_BASE = "https://de2.api.radio-browser.info/json";
const playerContainer = document.getElementById("playerContainer");
const player = document.getElementById("radioPlayer");
const currentLogo = document.getElementById("currentLogo");
const currentStation = document.getElementById("currentStation");

let favorites = JSON.parse(localStorage.getItem("favoriteStations") || "[]");

// Sempre carrega o feed e depois tenta tocar a r√°dio da URL
window.addEventListener('DOMContentLoaded', async () => {
    // 1) Lista de r√°dios
    fetchStations();

    // 2) Se tiver ?station=..., toca essa r√°dio tamb√©m
    const params = new URLSearchParams(location.search);
    const stationId = params.get('station');

    if (stationId) {
        try {
            const r = await fetch(`${API_BASE}/stations/byuuid/${encodeURIComponent(stationId)}`);
            const data = await r.json();
            if (Array.isArray(data) && data.length) {
                playStation(data[0], false);
            }
        } catch (e) {
            console.warn("Falha ao carregar r√°dio da URL:", e);
        }
    }
});

async function fetchStations(search = "", state = "", category = "") {
    document.getElementById("stations").innerHTML = "<p>Carregando esta√ß√µes...</p>";
    try {
        let url = `${API_BASE}/stations/search?country=Brazil&limit=50&order=clickcount&reverse=true`;
        if (search) url += `&name=${encodeURIComponent(search)}`;
        if (state) url += `&state=${encodeURIComponent(state)}`;
        if (category) url += `&tag=${encodeURIComponent(category)}`;

        const response = await fetch(url);
        const data = await response.json();
        renderStations(data);
    } catch (err) {
        console.error(err);
        document.getElementById("stations").innerHTML = "<p>Erro ao carregar esta√ß√µes.</p>";
    }
}

function renderStations(stations) {
    const container = document.getElementById("stations");
    container.innerHTML = "";

    if (!stations.length) {
        container.innerHTML = "<p>Nenhuma esta√ß√£o encontrada.</p>";
        return;
    }

    stations.forEach(station => {
        const div = document.createElement("div");
        div.className = "station";

        const isFavorite = favorites.some(fav => fav.stationuuid === station.stationuuid);

        div.innerHTML = `
            <span class="fav-icon ${isFavorite ? 'favorited' : ''}">‚òÖ</span>
            <img src="${station.favicon || 'https://www.coinpayu.com/static/newImg/dashboard/dashboard_afternoon.png'}" alt="Logo">
            <h3>${station.name}</h3>
            <p style="font-size: 0.9em; color: #aaa; word-wrap: break-word; overflow-wrap: break-word;">${station.tags || "Sem tags"}</p>
        `;

        div.querySelector("img").onclick = () => playStation(station, true);
        div.querySelector("h3").onclick = () => playStation(station, true);

        div.querySelector(".fav-icon").onclick = (e) => {
            e.stopPropagation();
            toggleFavorite(station);
            renderStations(stations);
        };

        container.appendChild(div);
    });
}

function toggleFavorite(station) {
    const index = favorites.findIndex(fav => fav.stationuuid === station.stationuuid);
    if (index > -1) {
        favorites.splice(index, 1);
    } else {
        favorites.push({ stationuuid: station.stationuuid, ...station });
    }
    localStorage.setItem("favoriteStations", JSON.stringify(favorites));
}

function showFavorites() {
    if (!favorites.length) {
        document.getElementById("stations").innerHTML = "<p>Voc√™ ainda n√£o tem r√°dios favoritas.</p>";
        return;
    }
    renderStations(favorites);
}

function playStation(station, updateUrl = true) {
    currentLogo.src = station.favicon || "https://www.coinpayu.com/static/newImg/dashboard/dashboard_afternoon.png";
    currentStation.textContent = station.name;
    player.src = station.url_resolved;
    player.play();
    playerContainer.style.display = "block";

    if (updateUrl) {
        const params = new URLSearchParams(window.location.search);
        params.set("station", station.stationuuid);
        history.pushState(null, "", "?" + params.toString());
    }
}

function applyFilters() {
    const search = document.getElementById("searchInput").value.trim();
    const state = document.getElementById("stateSelect").value;
    const category = document.getElementById("categorySelect").value;
    fetchStations(search, state, category);
}
</script>
</body>
</html>








